---
id: pageobjects
title: Μοτίβο Αντικειμένου Σελίδας
---

Η έκδοση 5 του WebdriverIO σχεδιάστηκε με γνώμονα την υποστήριξη του Μοτίβου Αντικειμένου Σελίδας. Με την εισαγωγή της αρχής "στοιχεία ως πολίτες πρώτης τάξης", είναι πλέον δυνατή η δημιουργία μεγάλων σουιτών δοκιμών χρησιμοποιώντας αυτό το μοτίβο.

Δεν απαιτούνται πρόσθετα πακέτα για τη δημιουργία αντικειμένων σελίδας. Αποδεικνύεται ότι οι καθαρές, σύγχρονες κλάσεις παρέχουν όλα τα απαραίτητα χαρακτηριστικά που χρειαζόμαστε:

- κληρονομικότητα μεταξύ αντικειμένων σελίδας
- τεμπέλικη φόρτωση στοιχείων
- ενθυλάκωση μεθόδων και ενεργειών

Ο στόχος της χρήσης αντικειμένων σελίδας είναι η αφαίρεση οποιασδήποτε πληροφορίας σελίδας από τις πραγματικές δοκιμές. Ιδανικά, θα πρέπει να αποθηκεύετε όλους τους επιλογείς ή συγκεκριμένες οδηγίες που είναι μοναδικές για μια συγκεκριμένη σελίδα σε ένα αντικείμενο σελίδας, ώστε να μπορείτε να εκτελείτε τη δοκιμή σας μετά από έναν πλήρη επανασχεδιασμό της σελίδας σας.

## Δημιουργία Αντικειμένου Σελίδας

Αρχικά, χρειαζόμαστε ένα κύριο αντικείμενο σελίδας που ονομάζουμε `Page.js`. Θα περιέχει γενικούς επιλογείς ή μεθόδους από τις οποίες θα κληρονομήσουν όλα τα αντικείμενα σελίδας.

```js
// Page.js
export default class Page {
    constructor() {
        this.title = 'My Page'
    }

    async open (path) {
        await browser.url(path)
    }
}
```

Θα `export` πάντα ένα στιγμιότυπο ενός αντικειμένου σελίδας και ποτέ δεν θα δημιουργήσουμε αυτό το στιγμιότυπο στη δοκιμή. Καθώς γράφουμε δοκιμές από άκρο σε άκρο, θεωρούμε πάντα τη σελίδα ως μια κατασκευή χωρίς κατάσταση—ακριβώς όπως κάθε αίτημα HTTP είναι μια κατασκευή χωρίς κατάσταση.

Βέβαια, ο περιηγητής μπορεί να μεταφέρει πληροφορίες συνεδρίας και επομένως μπορεί να εμφανίζει διαφορετικές σελίδες με βάση διαφορετικές συνεδρίες, αλλά αυτό δεν πρέπει να αντικατοπτρίζεται σε ένα αντικείμενο σελίδας. Αυτού του είδους οι αλλαγές κατάστασης πρέπει να βρίσκονται στις πραγματικές δοκιμές σας.

Ας ξεκινήσουμε τη δοκιμή της πρώτης σελίδας. Για λόγους επίδειξης, χρησιμοποιούμε τον ιστότοπο [The Internet](http://the-internet.herokuapp.com) από το [Elemental Selenium](http://elementalselenium.com) ως πειραματόζωο. Ας προσπαθήσουμε να δημιουργήσουμε ένα παράδειγμα αντικειμένου σελίδας για τη [σελίδα σύνδεσης](http://the-internet.herokuapp.com/login).

## `Get` -ting των Επιλογέων σας

Το πρώτο βήμα είναι να γράψουμε όλους τους σημαντικούς επιλογείς που απαιτούνται στο αντικείμενο `login.page` ως συναρτήσεις getter:

```js
// login.page.js
import Page from './page'

class LoginPage extends Page {

    get username () { return $('#username') }
    get password () { return $('#password') }
    get submitBtn () { return $('form button[type="submit"]') }
    get flash () { return $('#flash') }
    get headerLinks () { return $$('#header a') }

    async open () {
        await super.open('login')
    }

    async submit () {
        await this.submitBtn.click()
    }

}

export default new LoginPage()
```

Ο ορισμός επιλογέων σε συναρτήσεις getter μπορεί να φαίνεται λίγο περίεργος, αλλά είναι πραγματικά χρήσιμος. Αυτές οι συναρτήσεις αξιολογούνται _όταν προσπελάζετε την ιδιότητα_, όχι όταν δημιουργείτε το αντικείμενο. Με αυτόν τον τρόπο, ζητάτε πάντα το στοιχείο πριν κάνετε μια ενέργεια σε αυτό.

## Αλυσιδωτές Εντολές

Το WebdriverIO εσωτερικά θυμάται το τελευταίο αποτέλεσμα μιας εντολής. Εάν αλυσιδώσετε μια εντολή στοιχείου με μια εντολή ενέργειας, βρίσκει το στοιχείο από την προηγούμενη εντολή και χρησιμοποιεί το αποτέλεσμα για να εκτελέσει την ενέργεια. Με αυτόν τον τρόπο μπορείτε να αφαιρέσετε τον επιλογέα (πρώτη παράμετρο) και η εντολή φαίνεται τόσο απλή όσο:

```js
await LoginPage.username.setValue('Max Mustermann')
```

Που είναι βασικά το ίδιο με:

```js
let elem = await $('#username')
await elem.setValue('Max Mustermann')
```

ή

```js
await $('#username').setValue('Max Mustermann')
```

## Χρήση Αντικειμένων Σελίδας στις Δοκιμές σας

Αφού έχετε ορίσει τα απαραίτητα στοιχεία και μεθόδους για τη σελίδα, μπορείτε να ξεκινήσετε να γράφετε τη δοκιμή για αυτήν. Το μόνο που χρειάζεται να κάνετε για να χρησιμοποιήσετε το αντικείμενο σελίδας είναι να το `import` (ή `require`). Αυτό είναι!

Εφόσον έχετε εξαγάγει ένα ήδη δημιουργημένο στιγμιότυπο του αντικειμένου σελίδας, η εισαγωγή του σας επιτρέπει να ξεκινήσετε να το χρησιμοποιείτε αμέσως.

Εάν χρησιμοποιείτε ένα πλαίσιο επαλήθευσης (assertion framework), οι δοκιμές σας μπορούν να είναι ακόμα πιο εκφραστικές:

```js
// login.spec.js
import LoginPage from '../pageobjects/login.page'

describe('login form', () => {
    it('should deny access with wrong creds', async () => {
        await LoginPage.open()
        await LoginPage.username.setValue('foo')
        await LoginPage.password.setValue('bar')
        await LoginPage.submit()

        await expect(LoginPage.flash).toHaveText('Your username is invalid!')
    })

    it('should allow access with correct creds', async () => {
        await LoginPage.open()
        await LoginPage.username.setValue('tomsmith')
        await LoginPage.password.setValue('SuperSecretPassword!')
        await LoginPage.submit()

        await expect(LoginPage.flash).toHaveText('You logged into a secure area!')
    })
})
```

Από την πλευρά της δομής, έχει νόημα να διαχωρίσετε αρχεία spec και αντικείμενα σελίδας σε διαφορετικούς καταλόγους. Επιπλέον, μπορείτε να δώσετε σε κάθε αντικείμενο σελίδας την κατάληξη: `.page.js`. Αυτό καθιστά πιο σαφές ότι εισάγετε ένα αντικείμενο σελίδας.

## Προχωρώντας Περαιτέρω

Αυτή είναι η βασική αρχή για το πώς να γράφετε αντικείμενα σελίδας με το WebdriverIO. Αλλά μπορείτε να δημιουργήσετε πολύ πιο σύνθετες δομές αντικειμένων σελίδας από αυτό! Για παράδειγμα, μπορεί να έχετε συγκεκριμένα αντικείμενα σελίδας για modals, ή να χωρίσετε ένα τεράστιο αντικείμενο σελίδας σε διαφορετικές κλάσεις (καθεμία από τις οποίες αντιπροσωπεύει ένα διαφορετικό μέρος της συνολικής ιστοσελίδας) που κληρονομούν από το κύριο αντικείμενο σελίδας. Το μοτίβο προσφέρει πραγματικά πολλές ευκαιρίες για να διαχωρίσετε τις πληροφορίες σελίδας από τις δοκιμές σας, κάτι που είναι σημαντικό για να διατηρήσετε τη σουίτα δοκιμών σας δομημένη και σαφή σε περιόδους όπου το έργο και ο αριθμός των δοκιμών αυξάνεται.

Μπορείτε να βρείτε αυτό το παράδειγμα (και ακόμη περισσότερα παραδείγματα αντικειμένων σελίδας) στο [`φάκελο example`](https://github.com/webdriverio/webdriverio/tree/main/examples/pageobject) στο GitHub.
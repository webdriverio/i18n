---
id: protractor-migration
title: Από το Protractor
---

Αυτό το tutorial απευθύνεται σε άτομα που χρησιμοποιούν το Protractor και θέλουν να μεταφέρουν το framework τους στο WebdriverIO. Ξεκίνησε μετά την [ανακοίνωση](https://github.com/angular/protractor/issues/5502) της ομάδας Angular ότι το Protractor δεν θα υποστηρίζεται πλέον. Το WebdriverIO έχει επηρεαστεί από πολλές σχεδιαστικές αποφάσεις του Protractor, γεγονός που το καθιστά πιθανώς το πιο κοντινό framework για μετάβαση. Η ομάδα του WebdriverIO εκτιμά τη δουλειά κάθε συνεισφέροντα στο Protractor και ελπίζει ότι αυτό το tutorial θα κάνει τη μετάβαση στο WebdriverIO εύκολη και απλή.

Αν και θα θέλαμε να έχουμε μια πλήρως αυτοματοποιημένη διαδικασία για αυτό, η πραγματικότητα είναι διαφορετική. Ο καθένας έχει διαφορετική εγκατάσταση και χρησιμοποιεί το Protractor με διαφορετικούς τρόπους. Κάθε βήμα πρέπει να θεωρείται ως καθοδήγηση και λιγότερο ως οδηγία βήμα προς βήμα. Εάν αντιμετωπίζετε προβλήματα με τη μετάβαση, μη διστάσετε να [επικοινωνήσετε μαζί μας](https://github.com/webdriverio/codemod/discussions/new).

## Εγκατάσταση

Το API του Protractor και του WebdriverIO είναι στην πραγματικότητα πολύ παρόμοια, σε σημείο που η πλειοψηφία των εντολών μπορεί να ξαναγραφτεί με αυτοματοποιημένο τρόπο μέσω ενός [codemod](https://github.com/webdriverio/codemod).

Για να εγκαταστήσετε το codemod, εκτελέστε:

```sh
npm install jscodeshift @wdio/codemod
```

## Στρατηγική

Υπάρχουν πολλές στρατηγικές μετάβασης. Ανάλογα με το μέγεθος της ομάδας σας, τον αριθμό των αρχείων δοκιμών και την επείγουσα ανάγκη για μετάβαση, μπορείτε να προσπαθήσετε να μετατρέψετε όλες τις δοκιμές μαζί ή αρχείο προς αρχείο. Δεδομένου ότι το Protractor θα συνεχίσει να συντηρείται μέχρι την έκδοση 15 του Angular (τέλος του 2022), έχετε ακόμα αρκετό χρόνο. Μπορείτε να έχετε τις δοκιμές Protractor και WebdriverIO να εκτελούνται ταυτόχρονα και να αρχίσετε να γράφετε νέες δοκιμές στο WebdriverIO. Ανάλογα με τον χρονικό σας προϋπολογισμό, μπορείτε να αρχίσετε να μεταφέρετε πρώτα τις σημαντικές περιπτώσεις δοκιμών και να προχωρήσετε σε δοκιμές που ίσως μπορείτε ακόμη και να διαγράψετε.

## Πρώτα το αρχείο διαμόρφωσης

Αφού εγκαταστήσαμε το codemod, μπορούμε να αρχίσουμε να μετατρέπουμε το πρώτο αρχείο. Ρίξτε πρώτα μια ματιά στις [επιλογές διαμόρφωσης του WebdriverIO](configuration). Τα αρχεία διαμόρφωσης μπορεί να γίνουν πολύ περίπλοκα και μπορεί να έχει νόημα να μεταφέρετε μόνο τα ουσιώδη μέρη και να δείτε πώς μπορεί να προστεθεί το υπόλοιπο μόλις μεταφερθούν οι αντίστοιχες δοκιμές που χρειάζονται συγκεκριμένες επιλογές.

Για την πρώτη μετάβαση, μετατρέπουμε μόνο το αρχείο διαμόρφωσης και εκτελούμε:

```sh
npx jscodeshift -t ./node_modules/@wdio/codemod/protractor ./conf.ts
```

:::info

 Η διαμόρφωσή σας μπορεί να έχει διαφορετικό όνομα, ωστόσο η αρχή θα πρέπει να είναι η ίδια: ξεκινήστε πρώτα τη μετάβαση της διαμόρφωσης.

:::

## Εγκατάσταση εξαρτήσεων WebdriverIO

Το επόμενο βήμα είναι να διαμορφώσουμε μια ελάχιστη εγκατάσταση WebdriverIO που θα αρχίσουμε να αναπτύσσουμε καθώς μεταβαίνουμε από το ένα framework στο άλλο. Πρώτα εγκαθιστούμε το WebdriverIO CLI μέσω:

```sh
npm install --save-dev @wdio/cli
```

Στη συνέχεια εκτελούμε τον οδηγό διαμόρφωσης:

```sh
npx wdio config
```

Αυτό θα σας καθοδηγήσει μέσα από μερικές ερωτήσεις. Για αυτό το σενάριο μετάβασης:
- επιλέξτε τις προεπιλεγμένες επιλογές
- συνιστούμε να μην δημιουργείτε αυτόματα παραδείγματα αρχείων
- επιλέξτε έναν διαφορετικό φάκελο για τα αρχεία WebdriverIO
- και να επιλέξετε το Mocha αντί για το Jasmine.

:::info Γιατί Mocha;
Παρόλο που μπορεί να χρησιμοποιούσατε το Protractor με το Jasmine πριν, το Mocha παρέχει καλύτερους μηχανισμούς επανάληψης. Η επιλογή είναι δική σας!
:::

Μετά το μικρό ερωτηματολόγιο, ο οδηγός θα εγκαταστήσει όλα τα απαραίτητα πακέτα και θα τα αποθηκεύσει στο `package.json` σας.

## Μετάβαση αρχείου διαμόρφωσης

Αφού έχουμε ένα μετασχηματισμένο `conf.ts` και ένα νέο `wdio.conf.ts`, είναι η ώρα να μεταφέρουμε τη διαμόρφωση από το ένα αρχείο στο άλλο. Βεβαιωθείτε ότι μεταφέρετε μόνο τον κώδικα που είναι απαραίτητος για όλες τις δοκιμές ώστε να μπορούν να εκτελεστούν. Στο δικό μας μεταφέρουμε τη συνάρτηση hook και το χρονικό όριο του framework.

Θα συνεχίσουμε τώρα μόνο με το αρχείο `wdio.conf.ts` και επομένως δεν θα χρειαστούμε πλέον αλλαγές στην αρχική διαμόρφωση του Protractor. Μπορούμε να τις επαναφέρουμε έτσι ώστε και τα δύο frameworks να μπορούν να λειτουργούν παράλληλα και να μπορούμε να μεταφέρουμε ένα αρχείο κάθε φορά.

## Μετάβαση αρχείου δοκιμής

Είμαστε πλέον έτοιμοι να μεταφέρουμε το πρώτο αρχείο δοκιμής. Για να ξεκινήσουμε απλά, ας ξεκινήσουμε με ένα που δεν έχει πολλές εξαρτήσεις από πακέτα τρίτων ή άλλα αρχεία όπως PageObjects. Στο παράδειγμά μας, το πρώτο αρχείο που θα μεταφέρουμε είναι το `first-test.spec.ts`. Πρώτα δημιουργήστε τον κατάλογο όπου η νέα διαμόρφωση του WebdriverIO αναμένει τα αρχεία του και στη συνέχεια μετακινήστε το εκεί:

```sh
mv mkdir -p ./test/specs/
mv test-suites/first-test.spec.ts ./test/specs
```

Τώρα ας μετασχηματίσουμε αυτό το αρχείο:

```sh
npx jscodeshift -t ./node_modules/@wdio/codemod/protractor ./test/specs/first-test.spec.ts
```

Αυτό είναι! Αυτό το αρχείο είναι τόσο απλό που δεν χρειαζόμαστε πλέον πρόσθετες αλλαγές και μπορούμε απευθείας να δοκιμάσουμε να εκτελέσουμε το WebdriverIO μέσω:

```sh
npx wdio run wdio.conf.ts
```

Συγχαρητήρια 🥳 μόλις μεταφέρατε το πρώτο αρχείο!

## Επόμενα βήματα

Από αυτό το σημείο συνεχίζετε να μετατρέπετε δοκιμή προς δοκιμή και page object προς page object. Υπάρχουν πιθανότητες το codemod να αποτύχει για ορισμένα αρχεία με ένα σφάλμα όπως:

```
ERR /path/to/project/test/testdata/failing_submit.js Transformation error (Error transforming /test/testdata/failing_submit.js:2)
Error transforming /test/testdata/failing_submit.js:2

> login_form.submit()
  ^

The command "submit" is not supported in WebdriverIO. We advise to use the click command to click on the submit button instead. For more information on this configuration, see https://webdriver.io/docs/api/element/click.
  at /path/to/project/test/testdata/failing_submit.js:132:0
```

Για ορισμένες εντολές Protractor απλά δεν υπάρχει αντικατάσταση στο WebdriverIO. Σε αυτή την περίπτωση, το codemod θα σας δώσει κάποιες συμβουλές για το πώς να το αναδιαρθρώσετε. Αν συναντήσετε συχνά τέτοια μηνύματα σφάλματος, μη διστάσετε να [δημιουργήσετε ένα ζήτημα](https://github.com/webdriverio/codemod/issues/new) και να ζητήσετε να προσθέσουμε έναν συγκεκριμένο μετασχηματισμό. Αν και το codemod ήδη μετασχηματίζει την πλειοψηφία του API του Protractor, υπάρχει ακόμα πολύς χώρος για βελτιώσεις.

## Συμπέρασμα

Ελπίζουμε αυτό το tutorial να σας καθοδηγήσει λίγο στη διαδικασία μετάβασης στο WebdriverIO. Η κοινότητα συνεχίζει να βελτιώνει το codemod δοκιμάζοντάς το με διάφορες ομάδες σε διάφορους οργανισμούς. Μη διστάσετε να [δημιουργήσετε ένα ζήτημα](https://github.com/webdriverio/codemod/issues/new) αν έχετε σχόλια ή να [ξεκινήσετε μια συζήτηση](https://github.com/webdriverio/codemod/discussions/new) αν αντιμετωπίζετε δυσκολίες κατά τη διαδικασία μετάβασης.
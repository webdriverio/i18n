---
id: component-testing
title: Δοκιμές Συστατικών
---

Με το [Browser Runner](/docs/runner#browser-runner) του WebdriverIO μπορείτε να εκτελέσετε δοκιμές σε πραγματικό επιτραπέζιο ή κινητό πρόγραμμα περιήγησης χρησιμοποιώντας WebdriverIO και το πρωτόκολλο WebDriver για να αυτοματοποιήσετε και να αλληλεπιδράσετε με αυτό που αποδίδεται στη σελίδα. Αυτή η προσέγγιση έχει [πολλά πλεονεκτήματα](/docs/runner#browser-runner) σε σύγκριση με άλλα πλαίσια δοκιμών που επιτρέπουν δοκιμές μόνο έναντι του [JSDOM](https://www.npmjs.com/package/jsdom).

## Πώς λειτουργεί;

Το Browser Runner χρησιμοποιεί το [Vite](https://vitejs.dev/) για την απόδοση μιας σελίδας δοκιμής και την αρχικοποίηση ενός πλαισίου δοκιμών για την εκτέλεση των δοκιμών σας στο πρόγραμμα περιήγησης. Επί του παρόντος υποστηρίζει μόνο το Mocha, αλλά το Jasmine και το Cucumber είναι [στον οδικό χάρτη](https://github.com/orgs/webdriverio/projects/1). Αυτό επιτρέπει τη δοκιμή οποιουδήποτε είδους συστατικών, ακόμη και για έργα που δεν χρησιμοποιούν το Vite.

Ο διακομιστής Vite ξεκινά από το testrunner του WebdriverIO και διαμορφώνεται έτσι ώστε να μπορείτε να χρησιμοποιήσετε όλους τους εκθέτες και τις υπηρεσίες όπως συνηθίζατε για τις κανονικές δοκιμές e2e. Επιπλέον, αρχικοποιεί ένα στιγμιότυπο [`browser`](/docs/api/browser) που σας επιτρέπει να έχετε πρόσβαση σε ένα υποσύνολο του [WebdriverIO API](/docs/api) για να αλληλεπιδράσετε με οποιαδήποτε στοιχεία στη σελίδα. Παρόμοια με τις δοκιμές e2e, μπορείτε να αποκτήσετε πρόσβαση σε αυτό το στιγμιότυπο μέσω της μεταβλητής `browser` που συνδέεται στο παγκόσμιο πεδίο εφαρμογής ή εισάγοντάς το από το `@wdio/globals` ανάλογα με το πώς έχει οριστεί το [`injectGlobals`](/docs/api/globals).

Το WebdriverIO έχει ενσωματωμένη υποστήριξη για τα ακόλουθα πλαίσια:

- [__Nuxt__](https://nuxt.com/): Ο testrunner του WebdriverIO εντοπίζει μια εφαρμογή Nuxt και ρυθμίζει αυτόματα τα composables του έργου σας και βοηθά στην προσομοίωση του backend του Nuxt, διαβάστε περισσότερα στα [έγγραφα Nuxt](/docs/component-testing/vue#testing-vue-components-in-nuxt)
- [__TailwindCSS__](https://tailwindcss.com/): Ο testrunner του WebdriverIO εντοπίζει αν χρησιμοποιείτε TailwindCSS και φορτώνει σωστά το περιβάλλον στη σελίδα δοκιμής

## Ρύθμιση

Για να ρυθμίσετε το WebdriverIO για δοκιμές μονάδων ή συστατικών στο πρόγραμμα περιήγησης, ξεκινήστε ένα νέο έργο WebdriverIO μέσω:

```bash
npm init wdio@latest ./
# ή
yarn create wdio ./
```

Μόλις ξεκινήσει ο οδηγός διαμόρφωσης, επιλέξτε `browser` για την εκτέλεση δοκιμών μονάδων και συστατικών και επιλέξτε ένα από τα προκαθορισμένα αν το επιθυμείτε, διαφορετικά επιλέξτε _"Other"_ αν θέλετε να εκτελέσετε μόνο βασικές δοκιμές μονάδων. Μπορείτε επίσης να διαμορφώσετε μια προσαρμοσμένη διαμόρφωση Vite αν χρησιμοποιείτε ήδη το Vite στο έργο σας. Για περισσότερες πληροφορίες, ελέγξτε όλες τις [επιλογές εκτέλεσης](/docs/runner#runner-options).

:::info

__Σημείωση:__ Το WebdriverIO από προεπιλογή θα εκτελεί δοκιμές προγράμματος περιήγησης σε CI χωρίς κεφαλή, π.χ. όταν μια μεταβλητή περιβάλλοντος `CI` έχει οριστεί σε `'1'` ή `'true'`. Μπορείτε να διαμορφώσετε χειροκίνητα αυτή τη συμπεριφορά χρησιμοποιώντας την επιλογή [`headless`](/docs/runner#headless) για το πρόγραμμα εκτέλεσης.

:::

Στο τέλος αυτής της διαδικασίας θα πρέπει να βρείτε ένα `wdio.conf.js` που περιέχει διάφορες διαμορφώσεις WebdriverIO, συμπεριλαμβανομένης της ιδιότητας `runner`, π.χ.:

```ts reference useHTTPS runmeRepository="git@github.com:webdriverio/example-recipes.git" runmeFileToOpen="component-testing%2FREADME.md"
https://github.com/webdriverio/example-recipes/blob/fd54f94306ed8e7b40f967739164dfe4d6d76b41/wdio.comp.conf.js
```

Ορίζοντας διαφορετικές [δυνατότητες](/docs/configuration#capabilities) μπορείτε να εκτελέσετε τις δοκιμές σας σε διαφορετικά προγράμματα περιήγησης, παράλληλα αν το επιθυμείτε.

Αν εξακολουθείτε να μην είστε σίγουροι για το πώς λειτουργούν όλα, παρακολουθήστε το ακόλουθο οδηγό για το πώς να ξεκινήσετε με τις Δοκιμές Συστατικών στο WebdriverIO:

<LiteYouTubeEmbed
    id="5vp_3tGtnMc"
    title="Getting Started with Component Testing in WebdriverIO"
/>

## Δοκιμαστική Εξάρτυση

Είναι εντελώς στο χέρι σας τι θέλετε να εκτελέσετε στις δοκιμές σας και πώς θέλετε να αποδώσετε τα συστατικά. Ωστόσο, συνιστούμε να χρησιμοποιήσετε το [Testing Library](https://testing-library.com/) ως πλαίσιο βοηθητικών προγραμμάτων, καθώς παρέχει πρόσθετα για διάφορα πλαίσια συστατικών, όπως React, Preact, Svelte και Vue. Είναι πολύ χρήσιμο για την απόδοση συστατικών στη σελίδα δοκιμής και καθαρίζει αυτόματα αυτά τα συστατικά μετά από κάθε δοκιμή.

Μπορείτε να συνδυάσετε πρωτογενή στοιχεία του Testing Library με εντολές WebdriverIO όπως επιθυμείτε, π.χ.:

```js reference useHTTPS
https://github.com/webdriverio/example-recipes/blob/fd54f94306ed8e7b40f967739164dfe4d6d76b41/component-testing/svelte-example.js
```

__Σημείωση:__ η χρήση μεθόδων απόδοσης από το Testing Library βοηθά στην αφαίρεση δημιουργημένων συστατικών μεταξύ των δοκιμών. Αν δεν χρησιμοποιείτε το Testing Library, βεβαιωθείτε ότι συνδέετε τα συστατικά δοκιμών σας σε ένα δοχείο που καθαρίζεται μεταξύ των δοκιμών.

## Σενάρια Ρύθμισης

Μπορείτε να ρυθμίσετε τις δοκιμές σας εκτελώντας αυθαίρετα σενάρια σε Node.js ή στο πρόγραμμα περιήγησης, π.χ. εισάγοντας στυλ, προσομοιώνοντας API προγράμματος περιήγησης ή συνδέοντας σε μια υπηρεσία τρίτου. Τα [hooks](/docs/configuration#hooks) του WebdriverIO μπορούν να χρησιμοποιηθούν για την εκτέλεση κώδικα σε Node.js, ενώ το [`mochaOpts.require`](/docs/frameworks#require) σας επιτρέπει να εισάγετε σενάρια στο πρόγραμμα περιήγησης πριν φορτωθούν οι δοκιμές, π.χ.:

```js wdio.conf.js
export const config = {
    // ...
    mochaOpts: {
        ui: 'tdd',
        // παρέχετε ένα σενάριο ρύθμισης για εκτέλεση στο πρόγραμμα περιήγησης
        require: './__fixtures__/setup.js'
    },
    before: () => {
        // ρυθμίστε το περιβάλλον δοκιμών σε Node.js
    }
    // ...
}
```

Για παράδειγμα, αν θέλετε να προσομοιώσετε όλες τις κλήσεις [`fetch()`](https://developer.mozilla.org/en-US/docs/Web/API/fetch) στη δοκιμή σας με το ακόλουθο σενάριο ρύθμισης:

```js ./fixtures/setup.js
import { fn } from '@wdio/browser-runner'

// εκτέλεση κώδικα πριν φορτωθούν όλες οι δοκιμές
window.fetch = fn()

export const mochaGlobalSetup = () => {
    // εκτέλεση κώδικα μετά τη φόρτωση του αρχείου δοκιμής
}

export const mochaGlobalTeardown = () => {
    // εκτέλεση κώδικα μετά την εκτέλεση του αρχείου προδιαγραφών
}

```

Τώρα στις δοκιμές σας μπορείτε να παρέχετε προσαρμοσμένες τιμές απόκρισης για όλες τις αιτήσεις του προγράμματος περιήγησης. Διαβάστε περισσότερα για τα παγκόσμια fixtures στα [έγγραφα του Mocha](https://mochajs.org/#global-fixtures).

## Παρακολούθηση Αρχείων Δοκιμής και Εφαρμογής

Υπάρχουν πολλοί τρόποι με τους οποίους μπορείτε να αποσφαλματώσετε τις δοκιμές προγράμματος περιήγησης. Ο ευκολότερος είναι να ξεκινήσετε το testrunner του WebdriverIO με τη σημαία `--watch`, π.χ.:

```sh
$ npx wdio run ./wdio.conf.js --watch
```

Αυτό θα εκτελέσει αρχικά όλες τις δοκιμές και θα σταματήσει μόλις εκτελεστούν όλες. Στη συνέχεια, μπορείτε να κάνετε αλλαγές σε μεμονωμένα αρχεία, τα οποία στη συνέχεια θα εκτελεστούν ξανά μεμονωμένα. Αν ορίσετε ένα [`filesToWatch`](/docs/configuration#filestowatch) που δείχνει στα αρχεία της εφαρμογής σας, θα εκτελέσει ξανά όλες τις δοκιμές όταν γίνονται αλλαγές στην εφαρμογή σας.

## Αποσφαλμάτωση

Παρόλο που δεν είναι (ακόμα) δυνατόν να ορίσετε σημεία διακοπής στο IDE σας και να αναγνωριστούν από το απομακρυσμένο πρόγραμμα περιήγησης, μπορείτε να χρησιμοποιήσετε την εντολή [`debug`](/docs/api/browser/debug) για να σταματήσετε τη δοκιμή σε οποιοδήποτε σημείο. Αυτό σας επιτρέπει να ανοίξετε το DevTools για να αποσφαλματώσετε τη δοκιμή θέτοντας σημεία διακοπής στην [καρτέλα πηγών](https://buddy.works/tutorials/debugging-javascript-efficiently-with-chrome-devtools).

Όταν καλείται η εντολή `debug`, θα λάβετε επίσης μια διεπαφή repl Node.js στο τερματικό σας, που λέει:

```
The execution has stopped!
You can now go into the browser or use the command line as REPL
(To exit, press ^C again or type .exit)
```

Πατήστε `Ctrl` ή `Command` + `c` ή εισάγετε `.exit` για να συνεχίσετε με τη δοκιμή.

## Εκτέλεση χρησιμοποιώντας ένα Selenium Grid

Εάν έχετε ρυθμίσει ένα [Selenium Grid](https://www.selenium.dev/documentation/grid/) και εκτελείτε το πρόγραμμα περιήγησής σας μέσω αυτού του πλέγματος, πρέπει να ορίσετε την επιλογή `host` του browser runner για να επιτρέψετε στο πρόγραμμα περιήγησης να έχει πρόσβαση στον σωστό κεντρικό υπολογιστή όπου εξυπηρετούνται τα αρχεία δοκιμών, π.χ.:

```ts title=wdio.conf.ts
export const config: WebdriverIO.Config = {
    runner: ['browser', {
        // διεύθυνση IP δικτύου του μηχανήματος που εκτελεί τη διαδικασία WebdriverIO
        host: 'http://172.168.0.2'
    }]
}
```

Αυτό θα διασφαλίσει ότι το πρόγραμμα περιήγησης ανοίγει σωστά τη σωστή εκδοχή του διακομιστή που φιλοξενείται στην εκδοχή που εκτελεί τις δοκιμές WebdriverIO.

## Παραδείγματα

Μπορείτε να βρείτε διάφορα παραδείγματα για τη δοκιμή συστατικών χρησιμοποιώντας δημοφιλή πλαίσια συστατικών στο [αποθετήριο παραδειγμάτων](https://github.com/webdriverio/component-testing-examples) μας.
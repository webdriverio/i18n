---
id: faq
title: よくある質問
---

WebdriverIO MCPに関するよくある質問。

## 一般

### MCPとは何ですか？

MCP（Model Context Protocol）は、ClaudeのようなAIアシスタントが外部ツールやサービスと対話できるようにするオープンプロトコルです。WebdriverIO MCPはこのプロトコルを実装して、Claude DesktopとClaude Codeにブラウザやモバイル自動化機能を提供します。

### WebdriverIO MCPで何を自動化できますか？

以下を自動化できます：
-   **デスクトップブラウザ**（Chrome） - ナビゲーション、クリック、入力、スクリーンショット
-   **iOSアプリ** - シミュレーターまたは実機デバイス上
-   **Androidアプリ** - エミュレーターまたは実機デバイス上
-   **ハイブリッドアプリ** - ネイティブとWebコンテキスト間の切り替え

### コードを書く必要がありますか？

いいえ！これがMCPの主な利点です。自然言語で何をしたいか説明すれば、Claudeが適切なツールを使用してタスクを達成します。

**例えばこのようなプロンプト：**
-   「Chromeを開いてwebdriver.ioに移動して」
-   「Get Startedボタンをクリックして」
-   「現在のページのスクリーンショットを撮って」
-   「iOSアプリを起動してテストユーザーとしてログインして」

---

## インストールとセットアップ

### WebdriverIO MCPのインストール方法は？

別途インストールする必要はありません。MCPサーバーは、Claude DesktopやClaude Codeで設定すると、npxを通じて自動的に実行されます。

Claude Desktopの設定に以下を追加してください：

```json
{
    "mcpServers": {
        "wdio-mcp": {
            "command": "npx",
            "args": ["-y", "@wdio/mcp"]
        }
    }
}
```

### Claude Desktop設定ファイルはどこにありますか？

-   **macOS:** `~/Library/Application Support/Claude/claude_desktop_config.json`
-   **Windows:** `%APPDATA%\Claude\claude_desktop_config.json`

### ブラウザ自動化にAppiumは必要ですか？

いいえ。ブラウザ自動化にはChromeがインストールされているだけで十分です。WebdriverIOがChromeDriverを自動的に処理します。

### モバイル自動化にAppiumは必要ですか？

はい。モバイル自動化には以下が必要です：
1. Appiumサーバーの実行（`npm install -g appium && appium`）
2. プラットフォームドライバーのインストール（iOSには`appium driver install xcuitest`、Androidには`appium driver install uiautomator2`）
3. 適切な開発ツール（iOSにはXcode、AndroidにはAndroid SDK）

---

## ブラウザ自動化

### どのブラウザがサポートされていますか？

現在、**Chrome**のみがサポートされています。将来のバージョンで他のブラウザのサポートが追加される可能性があります。

### Chromeをヘッドレスモードで実行できますか？

はい！Claudeにヘッドレスモードでブラウザを起動するよう依頼してください：

「Chromeをヘッドレスモードで起動して」

またはClaudeが適切な場合（CI/CD環境など）にこのオプションを使用します。

### ブラウザウィンドウのサイズを設定できますか？

はい。ブラウザの起動時にサイズを指定できます：

「ウィンドウサイズを1920x1080にしてChromeを起動して」

サポートされているサイズ：幅400〜3840ピクセル、高さ400〜2160ピクセル。デフォルトは1920x1080です。

### ブラウザの起動と移動を一度に行えますか？

はい！`navigationUrl`パラメータを使用してください：

「Chromeを起動してhttps://webdriver.ioに移動して」

これは、ブラウザを起動してから別途ナビゲーションするよりも効率的です。

### スクリーンショットを撮るにはどうしますか？

Claudeに単に尋ねるだけです：

「現在のページのスクリーンショットを撮って」

スクリーンショットは自動的に最適化されます：
- 最大2000pxの次元に縮小
- 最大1MBのファイルサイズに圧縮
- フォーマット：PNG または JPEG（最適な品質のために自動選択）

### iframeを操作できますか？

現在、MCPサーバーはメインドキュメントで動作します。iframe操作は将来のバージョンで追加される可能性があります。

### カスタムJavaScriptを実行できますか？

はい！`execute_script`ツールを使用してください：

「ページタイトルを取得するスクリプトを実行して」
「スクリプトを実行して：return document.querySelectorAll('button').length」

---

## モバイル自動化

### iOSアプリを起動するにはどうしますか？

必要な詳細をClaudeに伝えてください：

「iPhone 15シミュレータで/path/to/MyApp.appにあるiOSアプリを起動して」

またはインストール済みアプリの場合：

「iPhone 15シミュレータでnoResetを有効にしてアプリを起動して」

### Androidアプリを起動するにはどうしますか？

「Pixel 7エミュレータで/path/to/app.apkにあるAndroidアプリを起動して」

またはインストール済みアプリの場合：

「Pixel 7エミュレータでnoResetを有効にしてアプリを起動して」

### 実機でテストできますか？

はい！実機の場合、デバイスのUDIDが必要です：

-   **iOS:** デバイスを接続し、Finderを開き、デバイスをクリックし、シリアル番号をクリックしてUDIDを表示
-   **Android:** ターミナルで`adb devices`を実行

そしてClaudeに依頼します：

「UDID abc123...の実機でiOSアプリを起動して」

### 権限ダイアログをどう処理しますか？

デフォルトでは、権限は自動的に許可されます（`autoGrantPermissions: true`）。権限フローをテストする必要がある場合は、これを無効にできます：

「権限を自動的に許可しないでアプリを起動して」

### どのようなジェスチャーがサポートされていますか？

-   **タップ:** 要素または座標をタップ
-   **スワイプ:** 上、下、左、右にスワイプ
-   **ドラッグアンドドロップ:** ある要素から別の要素または座標にドラッグ

注意：`long_press`はAppiumモバイルコマンドを使用した`execute_script`で利用可能です。

### モバイルアプリでスクロールするにはどうしますか？

スワイプジェスチャーを使用します：

「下にスクロールするために上にスワイプして」
「上にスクロールするために下にスワイプして」

### デバイスを回転できますか？

はい：

「デバイスを横向きに回転して」
「デバイスを縦向きに回転して」

### ハイブリッドアプリの扱い方は？

ウェブビューを持つアプリの場合、コンテキストを切り替えることができます：

「利用可能なコンテキストを取得して」
「ウェブビューコンテキストに切り替えて」
「ネイティブコンテキストに戻して」

### Appiumモバイルコマンドを実行できますか？

はい！`execute_script`ツールを使用してください：

```
"mobile: pressKey"をargs [{ keycode: 4 }]で実行して  // AndroidでBACKを押す
"mobile: activateApp"をargs [{ appId: "com.example.app" }]で実行して
"mobile: terminateApp"をargs [{ bundleId: "com.example.app" }]で実行して
```

---

## 要素の選択

### Claudeはどの要素を操作するか知るにはどうしますか？

Claudeは`get_visible_elements`ツールを使用してページ/画面上のインタラクティブな要素を識別します。各要素には複数のセレクター戦略が含まれます。

### ページに要素が多すぎる場合はどうしますか？

ページネーションを使用して大量の要素リストを管理します：

「最初の20個の表示要素を取得して」
「オフセット20、リミット20で表示要素を取得して」

レスポンスには要素をナビゲートするための`total`、`showing`、`hasMore`が含まれます。

### 特定のタイプの要素のみを取得できますか？

はい！`elementType`パラメータを使用してください：

-   `interactable`（デフォルト）：ボタン、リンク、入力フィールド
-   `visual`：画像、SVG
-   `all`：両方のタイプ

「ページ上の視覚的な要素を取得して」

### Claudeが間違った要素をクリックした場合はどうすればいいですか？

より具体的に指定できます：

-   正確なテキストを提供：「'注文を確定'と書かれたボタンをクリックして」
-   セレクターを提供：「セレクター #submit-btn の要素をクリックして」
-   アクセシビリティIDを提供：「アクセシビリティID loginButton の要素をクリックして」

### モバイルに最適なセレクター戦略は何ですか？

1. **アクセシビリティID**（最良） - `~loginButton`
2. **リソースID**（Android） - `id=login_button`
3. **述語文字列**（iOS） - `-ios predicate string:label == "Login"`
4. **XPath**（最終手段） - 遅いがどこでも動作

### アクセシビリティツリーとは何で、いつ使用すべきですか？

アクセシビリティツリーは、ページ要素に関するセマンティック情報（役割、名前、状態）を提供します。次の場合に`get_accessibility`を使用します：
- `get_visible_elements`が期待する要素を返さない場合
- アクセシビリティロール（ボタン、リンク、テキストボックスなど）で要素を見つける必要がある場合
- 要素に関する詳細なセマンティック情報が必要な場合

「ボタンとリンクのロールでフィルタリングしたアクセシビリティツリーを取得して」

---

## セッション管理

### 複数のセッションを同時に持つことはできますか？

いいえ。MCPサーバーは単一セッションモデルを使用します。一度にアクティブにできるブラウザまたはアプリセッションは1つだけです。

### セッションを閉じるとどうなりますか？

セッションタイプと設定によって異なります：

-   **ブラウザ:** Chromeは完全に閉じます
-   **`noReset: false`のモバイル:** アプリは終了します
-   **`noReset: true`または`appPath`なしのモバイル:** アプリは開いたまま（セッションは自動的にデタッチされます）

### セッション間でアプリの状態を保持できますか？

はい！`noReset`オプションを使用してください：

「noResetを有効にしてアプリを起動して」

これにより、ログイン状態、設定、その他のアプリデータが保持されます。

### クローズとデタッチの違いは何ですか？

-   **クローズ:** ブラウザ/アプリを完全に終了します
-   **デタッチ:** 自動化を切断しますが、ブラウザ/アプリは実行したままにします

デタッチは、自動化後に手動で状態を検査したい場合に役立ちます。

### デバッグ中にセッションがタイムアウトし続ける

コマンドタイムアウトを増やしてください：

「newCommandTimeoutを300秒にしてアプリを起動して」

デフォルトは60秒です。長時間のデバッグセッションでは、300〜600秒を試してみてください。

---

## トラブルシューティング

### 「Session not found」エラー

これはアクティブなセッションが存在しないことを意味します。最初にブラウザまたはアプリセッションを開始してください：

「Chromeを起動してgoogle.comに移動して」

### 「Element not found」エラー

要素が表示されていないか、異なるセレクターを持っている可能性があります。次のことを試してください：

1. まずClaudeに全ての表示要素を取得するよう依頼する
2. より具体的なセレクターを提供する
3. ページ/アプリが完全に読み込まれるのを待つ
4. 画面外の要素を見つけるために`inViewportOnly: false`を使用する

### ブラウザが起動しない

1. Chromeがインストールされていることを確認する
2. 他のプロセスがデバッグポート（9222）を使用していないか確認する
3. ヘッドレスモードを試してみる

### Appium接続に失敗した

これはモバイル自動化を開始する際の最も一般的な問題です。

1. **Appiumが実行されていることを確認**: `curl http://localhost:4723/status`
2. 必要に応じてAppiumを起動: `appium`
3. Appium URL設定がサーバーと一致していることを確認
4. ドライバーがインストールされていることを確認: `appium driver list --installed`

:::tip
MCPサーバーは、モバイルセッションを開始する前にAppiumが実行されている必要があります。最初にAppiumを起動してください：
```sh
appium
```
将来のバージョンでは、自動Appiumサービス管理が含まれる可能性があります。
:::

### iOSシミュレータが起動しない

1. Xcodeがインストールされていることを確認: `xcode-select --install`
2. 利用可能なシミュレータをリスト: `xcrun simctl list devices`
3. Console.appで特定のシミュレータエラーを確認

### Androidエミュレータが起動しない

1. `ANDROID_HOME`を設定: `export ANDROID_HOME=$HOME/Library/Android/sdk`
2. エミュレータを確認: `emulator -list-avds`
3. エミュレータを手動で起動: `emulator -avd <avd-name>`
4. デバイスが接続されていることを確認: `adb devices`

### スクリーンショットが機能しない

1. モバイルの場合、セッションがアクティブであることを確認
2. ブラウザの場合、別のページを試す（一部のページはスクリーンショットをブロックします）
3. Claude Desktopのログでエラーを確認

スクリーンショットは自動的に最大1MBに圧縮されるため、大きなスクリーンショットは機能しますが、品質が低くなる場合があります。

---

## パフォーマンス

### なぜモバイル自動化は遅いのですか？

モバイル自動化には以下が含まれます：
1. Appiumサーバーとのネットワーク通信
2. Appiumとデバイス/シミュレータとの通信
3. デバイスのレンダリングと応答

より高速な自動化のためのヒント：
-   開発には実機ではなくエミュレータ/シミュレータを使用する
-   XPathではなくアクセシビリティIDを使用する
-   要素検出には`inViewportOnly: true`を有効にする
-   トークン使用量を減らすためにページネーション（`limit`）を使用する

### 要素検出を高速化するにはどうすればよいですか？

MCPサーバーはすでにXMLページソース解析を使用して要素検出を最適化しています（従来の要素クエリの600回以上のHTTP呼び出しに対して2回）。追加のヒント：

-   `inViewportOnly: true`を維持（デフォルト）
-   `includeContainers: false`を設定（デフォルト）
-   大画面では`limit`と`offset`を使用してページネーションを行う
-   すべての要素を検索するのではなく、特定のセレクターを使用する

### スクリーンショットが遅いまたは失敗する

スクリーンショットは自動的に最適化されます：
- 2000px以上の場合はリサイズ
- 1MB以下に圧縮
- PNGが大きすぎる場合はJPEGに変換

この最適化により処理時間が短縮され、Claudeが画像を処理できるようになります。

---

## 制限事項

### 現在の制限は何ですか？

-   **単一セッション:** 一度に1つのブラウザ/アプリのみ
-   **ブラウザサポート:** Chromeのみ（現時点では）
-   **iframeサポート:** iframeの限定的なサポート
-   **ファイルアップロード:** ツールを介して直接サポートされていない
-   **オーディオ/ビデオ:** メディア再生と対話できない
-   **ブラウザ拡張機能:** サポートされていない

### 本番テストに使用できますか？

WebdriverIO MCPはインタラクティブなAI支援自動化用に設計されています。本番CI/CDテストには、完全なプログラム制御を備えたWebdriverIOの従来のテストランナーの使用を検討してください。

---

## セキュリティ

### データは安全ですか？

MCPサーバーはローカルマシン上で実行されます。すべての自動化は、ローカルブラウザ/Appium接続を通じて行われます。明示的にナビゲートする以外の場所に外部サーバーにデータが送信されることはありません。

### Claudeは私のパスワードにアクセスできますか？

Claudeはページコンテンツを見て要素と対話できますが：
-   `<input type="password">`フィールドのパスワードはマスクされます
-   機密認証情報の自動化は避けるべきです
-   自動化にはテストアカウントを使用してください

---

## 貢献

### 貢献するにはどうすればよいですか？

[GitHubリポジトリ](https://github.com/webdriverio/mcp)にアクセスして：
-   バグを報告
-   機能をリクエスト
-   プルリクエストを提出

### どこで助けを得られますか？

-   [WebdriverIO Discord](https://discord.webdriver.io/)
-   [GitHub Issues](https://github.com/webdriverio/mcp/issues)
-   [WebdriverIO ドキュメント](https://webdriver.io/)
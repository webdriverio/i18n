---
id: tools
title: Инструменты
---

Следующие инструменты доступны через сервер WebdriverIO MCP. Эти инструменты позволяют ИИ-ассистентам автоматизировать браузеры и мобильные приложения.

## Управление сессиями

### `start_browser`

Запускает сессию браузера Chrome.

#### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|-----------|------|-----------|---------|-------------|
| `headless` | boolean | Нет | `false` | Запуск Chrome в режиме без интерфейса |
| `windowWidth` | number | Нет | `1920` | Ширина окна браузера (400-3840) |
| `windowHeight` | number | Нет | `1080` | Высота окна браузера (400-2160) |
| `navigationUrl` | string | Нет | - | URL, на который нужно перейти после запуска браузера |

#### Пример

```
Start a browser with 1920x1080 resolution and navigate to webdriver.io
```

#### Поддержка

- Настольные браузеры

---

### `start_app_session`

Запускает сессию мобильного приложения на iOS или Android через Appium.

#### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|-----------|------|-----------|---------|-------------|
| `platform` | string | Да | - | Платформа для автоматизации: `iOS` или `Android` |
| `deviceName` | string | Да | - | Имя устройства или симулятора/эмулятора |
| `appPath` | string | Нет* | - | Путь к файлу приложения (.app, .ipa, или .apk) |
| `platformVersion` | string | Нет | - | Версия ОС (например, `17.0`, `14`) |
| `automationName` | string | Нет | Auto | `XCUITest` (iOS), `UiAutomator2` или `Espresso` (Android) |
| `udid` | string | Нет | - | Уникальный идентификатор устройства (необходим для реальных устройств iOS) |
| `noReset` | boolean | Нет | `false` | Сохранить состояние приложения между сессиями |
| `fullReset` | boolean | Нет | `true` | Удалить и переустановить приложение перед сессией |
| `autoGrantPermissions` | boolean | Нет | `true` | Автоматически предоставлять разрешения приложению |
| `autoAcceptAlerts` | boolean | Нет | `true` | Автоматически принимать системные уведомления |
| `autoDismissAlerts` | boolean | Нет | `false` | Отклонять (вместо принятия) уведомления |
| `appWaitActivity` | string | Нет | - | Активность, которую нужно дождаться при запуске (только Android) |
| `newCommandTimeout` | number | Нет | `60` | Секунды до истечения времени сессии из-за бездействия |
| `appiumHost` | string | Нет | `127.0.0.1` | Хост сервера Appium |
| `appiumPort` | number | Нет | `4723` | Порт сервера Appium |
| `appiumPath` | string | Нет | `/` | Путь сервера Appium |

*Либо должен быть предоставлен `appPath`, либо `noReset: true` для подключения к уже запущенному приложению.

#### Пример

```
Start an iOS app session on iPhone 15 simulator with my app at /path/to/app.app
```

#### Поддержка

- Симуляторы iOS
- Реальные устройства iOS
- Эмуляторы Android
- Реальные устройства Android

---

### `close_session`

Закрывает текущую сессию браузера или приложения.

#### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|-----------|------|-----------|---------|-------------|
| `detach` | boolean | Нет | `false` | Отсоединиться от сессии вместо закрытия (оставляет браузер/приложение запущенным) |

#### Примечания

Сессии с `noReset: true` или без `appPath` автоматически отсоединяются при закрытии для сохранения состояния.

#### Поддержка

- Настольные браузеры
- Мобильные приложения

---

## Навигация

### `navigate`

Переходит по URL.

#### Параметры

| Параметр | Тип | Обязательный | Описание |
|-----------|------|-----------|-------------|
| `url` | string | Да | URL, на который нужно перейти |

#### Пример

```
Navigate to https://webdriver.io
```

#### Поддержка

- Настольные браузеры

---

## Взаимодействие с элементами

### `click_element`

Кликает на элемент, определенный селектором.

#### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|-----------|------|-----------|---------|-------------|
| `selector` | string | Да | - | CSS селектор, XPath или мобильный селектор |
| `scrollToView` | boolean | Нет | `true` | Прокрутить страницу до элемента перед кликом |
| `timeout` | number | Нет | `3000` | Максимальное время ожидания элемента (мс) |

#### Примечания

- Поддерживает текстовые селекторы WebdriverIO: `button=Точный текст` или `a*=Содержит текст`
- Использует центральное выравнивание для позиционирования прокрутки

#### Пример

```
Click the element with selector "#submit-button"
```

#### Поддержка

- Настольные браузеры
- Нативные мобильные приложения

---

### `set_value`

Вводит текст в поле ввода.

#### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|-----------|------|-----------|---------|-------------|
| `selector` | string | Да | - | Селектор для элемента ввода |
| `value` | string | Да | - | Текст для ввода |
| `scrollToView` | boolean | Нет | `true` | Прокрутить до элемента перед вводом |
| `timeout` | number | Нет | `3000` | Максимальное время ожидания элемента (мс) |

#### Примечания

Очищает существующее значение перед вводом нового текста.

#### Пример

```
Set the value "john@example.com" in the element with selector "#email"
```

#### Поддержка

- Настольные браузеры
- Нативные мобильные приложения

---

## Анализ страницы

### `get_visible_elements`

Получает видимые и интерактивные элементы на текущей странице или экране. Это основной инструмент для обнаружения доступных для взаимодействия элементов.

#### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|-----------|------|-----------|---------|-------------|
| `elementType` | string | Нет | `interactable` | Тип элементов: `interactable` (кнопки/ссылки/поля ввода), `visual` (изображения/SVG), или `all` |
| `inViewportOnly` | boolean | Нет | `true` | Возвращать только элементы, видимые во viewport |
| `includeContainers` | boolean | Нет | `false` | Включать контейнеры макета (ViewGroup, ScrollView и т.д.) |
| `includeBounds` | boolean | Нет | `false` | Включать координаты элемента (x, y, ширина, высота) |
| `limit` | number | Нет | `0` | Максимальное количество возвращаемых элементов (0 = неограниченно) |
| `offset` | number | Нет | `0` | Количество элементов для пропуска (для пагинации) |

#### Возвращает

```json
{
  "total": 42,
  "showing": 20,
  "hasMore": true,
  "elements": [...]
}
```

**Веб-элементы включают:** tagName, type, id, className, textContent, value, placeholder, href, ariaLabel, role, cssSelector, isInViewport

**Мобильные элементы включают:** Несколько стратегий локаторов (accessibility ID, resource ID, XPath, UiAutomator/predicates), тип элемента, текст и, опционально, границы

#### Примечания

- **Веб**: Использует оптимизированный браузерный скрипт для быстрого обнаружения элементов
- **Мобильные**: Использует эффективный разбор XML исходного кода страницы (2 HTTP-вызова вместо 600+ для запросов элементов)
- Используйте пагинацию (`limit` и `offset`) для больших страниц, чтобы уменьшить использование токенов

#### Пример

```
Get all visible elements on the page with their coordinates
```

#### Поддержка

- Настольные браузеры
- Мобильные приложения

---

### `get_accessibility`

Получает дерево доступности текущей страницы с семантической информацией о ролях, именах и состояниях.

#### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|-----------|------|-----------|---------|-------------|
| `limit` | number | Нет | `100` | Максимальное количество узлов для возврата (0 = неограниченно) |
| `offset` | number | Нет | `0` | Количество узлов для пропуска (для пагинации) |
| `roles` | string[] | Нет | Все | Фильтр по определенным ролям (например, `["button", "link", "textbox"]`) |
| `namedOnly` | boolean | Нет | `true` | Возвращать только узлы с именем/меткой |

#### Возвращает

```json
{
  "total": 85,
  "showing": 100,
  "hasMore": false,
  "nodes": [
    { "role": "button", "name": "Submit" },
    { "role": "link", "name": "Home" }
  ]
}
```

#### Примечания

- Только для браузера. Для мобильных приложений используйте вместо этого `get_visible_elements`
- Полезно, когда `get_visible_elements` не возвращает ожидаемые элементы
- `namedOnly: true` отфильтровывает анонимные контейнеры и уменьшает шум

#### Поддержка

- Настольные браузеры

---

## Скриншоты

### `take_screenshot`

Делает скриншот текущего видимого экрана.

#### Параметры

| Параметр | Тип | Обязательный | Описание |
|-----------|------|-----------|-------------|
| `outputPath` | string | Нет | Путь для сохранения файла скриншота. Если опущен, возвращает данные в base64 |

#### Возвращает

Данные изображения в формате Base64 (PNG или JPEG) с информацией о размере.

#### Примечания

Скриншоты автоматически оптимизируются:
- Максимальный размер: 2000 пикселей (масштабируется, если больше)
- Максимальный размер файла: 1МБ
- Формат: PNG с максимальным сжатием или JPEG, если необходимо соблюсти лимит размера

#### Поддержка

- Настольные браузеры
- Мобильные приложения

---

## Прокрутка

### `scroll`

Прокручивает страницу вверх или вниз на указанное количество пикселей.

#### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|-----------|------|-----------|---------|-------------|
| `direction` | string | Да | - | Направление прокрутки: `up` или `down` |
| `pixels` | number | Нет | `500` | Количество пикселей для прокрутки |

#### Примечания

Только для браузера. Для мобильной прокрутки используйте инструмент `swipe`.

#### Поддержка

- Настольные браузеры

---

## Управление куками

### `get_cookies`

Получает куки из текущей сессии.

#### Параметры

| Параметр | Тип | Обязательный | Описание |
|-----------|------|-----------|-------------|
| `name` | string | Нет | Конкретное имя куки для получения (пропустите для всех куки) |

#### Возвращает

Объекты куки с именем, значением, доменом, путем, сроком действия, secure и httpOnly свойствами.

#### Поддержка

- Настольные браузеры

---

### `set_cookie`

Устанавливает куки в текущей сессии.

#### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|-----------|------|-----------|---------|-------------|
| `name` | string | Да | - | Имя куки |
| `value` | string | Да | - | Значение куки |
| `domain` | string | Нет | Текущий | Домен куки |
| `path` | string | Нет | `/` | Путь куки |
| `expiry` | number | Нет | - | Срок действия в формате Unix timestamp (секунды) |
| `secure` | boolean | Нет | - | Флаг secure |
| `httpOnly` | boolean | Нет | - | Флаг httpOnly |
| `sameSite` | string | Нет | - | Атрибут SameSite: `strict`, `lax`, или `none` |

#### Поддержка

- Настольные браузеры

---

### `delete_cookies`

Удаляет куки из текущей сессии.

#### Параметры

| Параметр | Тип | Обязательный | Описание |
|-----------|------|-----------|-------------|
| `name` | string | Нет | Конкретное имя куки для удаления (пропустите для удаления всех) |

#### Поддержка

- Настольные браузеры

---

## Сенсорные жесты (Мобильные)

### `tap_element`

Тапает по элементу или по координатам экрана.

#### Параметры

| Параметр | Тип | Обязательный | Описание |
|-----------|------|-----------|-------------|
| `selector` | string | Нет* | Селектор элемента для тапа |
| `x` | number | Нет* | X координата для тапа |
| `y` | number | Нет* | Y координата для тапа |

*Требуется либо `selector`, либо оба параметра `x` и `y`.

#### Поддержка

- Мобильные приложения

---

### `swipe`

Выполняет жест смахивания в указанном направлении.

#### Параметры

| Параметр | Тип | Обязательный | По умолчанию | Описание |
|-----------|------|-----------|---------|-------------|
| `direction` | string | Да | - | Направление смахивания: `up`, `down`, `left`, `right` |
| `duration` | number | Нет | `500` | Продолжительность смахивания в миллисекундах (100-5000) |
| `percent` | number | Нет | 0.5/0.95 | Процент экрана для смахивания (0-1) |

#### Примечания

- Значение по умолчанию для percent: 0.5 для вертикальных свайпов, 0.95 для горизонтальных
- Направление указывает на движение контента: "swipe up" прокручивает контент вверх

#### Пример

```
Swipe up to scroll down the screen
```

#### Поддержка

- Мобильные приложения

---

### `drag_and_drop`

Перетаскивает элемент к другому элементу или координатам.

#### Параметры

| Параметр | Тип | Обязательный | Описание |
|-----------|------|-----------|-------------|
| `sourceSelector` | string | Да | Селектор исходного элемента для перетаскивания |
| `targetSelector` | string | Нет* | Селектор целевого элемента для сброса |
| `x` | number | Нет* | Целевое смещение X (если нет targetSelector) |
| `y` | number | Нет* | Целевое смещение Y (если нет targetSelector) |
| `duration` | number | Нет | По умолчанию | Продолжительность перетаскивания в миллисекундах (100-5000) |

*Требуется либо `targetSelector`, либо оба параметра `x` и `y`.

#### Поддержка

- Мобильные приложения

---

## Жизненный цикл приложений (Мобильные)

### `get_app_state`

Получает текущее состояние приложения.

#### Параметры

| Параметр | Тип | Обязательный | Описание |
|-----------|------|-----------|-------------|
| `bundleId` | string | Да | Идентификатор приложения (bundle ID для iOS, package name для Android) |

#### Возвращает

Состояние приложения: `not installed`, `not running`, `running in background (suspended)`, `running in background`, или `running in foreground`.

#### Поддержка

- Мобильные приложения

---

## Переключение контекста (Гибридные приложения)

### `get_contexts`

Перечисляет все доступные контексты (нативные и webview).

#### Параметры

Нет

#### Возвращает

Массив имен контекстов (например, `["NATIVE_APP", "WEBVIEW_com.example.app"]`).

#### Поддержка

- Мобильные гибридные приложения

---

### `get_current_context`

Получает текущий активный контекст.

#### Параметры

Нет

#### Возвращает

Имя текущего контекста (например, `NATIVE_APP` или `WEBVIEW_*`).

#### Поддержка

- Мобильные гибридные приложения

---

### `switch_context`

Переключается между нативным и webview контекстами.

#### Параметры

| Параметр | Тип | Обязательный | Описание |
|-----------|------|-----------|-------------|
| `context` | string | Да | Имя контекста или индекс (начиная с 1) из `get_contexts` |

#### Пример

```
Switch to the WEBVIEW_com.example.app context
```

#### Поддержка

- Мобильные гибридные приложения

---

## Управление устройством (Мобильные)

### `rotate_device`

Поворачивает устройство в указанную ориентацию.

#### Параметры

| Параметр | Тип | Обязательный | Описание |
|-----------|------|-----------|-------------|
| `orientation` | string | Да | `PORTRAIT` или `LANDSCAPE` |

#### Поддержка

- Мобильные приложения

---

### `hide_keyboard`

Скрывает экранную клавиатуру.

#### Параметры

Нет

#### Поддержка

- Мобильные приложения

---

### `get_geolocation`

Получает текущие GPS координаты.

#### Параметры

Нет

#### Возвращает

Объект с `latitude`, `longitude` и `altitude`.

#### Поддержка

- Мобильные приложения

---

### `set_geolocation`

Устанавливает GPS координаты устройства.

#### Параметры

| Параметр | Тип | Обязательный | Описание |
|-----------|------|-----------|-------------|
| `latitude` | number | Да | Координата широты (-90 до 90) |
| `longitude` | number | Да | Координата долготы (-180 до 180) |
| `altitude` | number | Нет | Высота в метрах |

#### Пример

```
Set geolocation to San Francisco (37.7749, -122.4194)
```

#### Поддержка

- Мобильные приложения

---

## Выполнение скриптов

### `execute_script`

Выполняет JavaScript в браузере или мобильные команды через Appium.

#### Параметры

| Параметр | Тип | Обязательный | Описание |
|-----------|------|-----------|-------------|
| `script` | string | Да | JavaScript код (браузер) или мобильная команда (например, `mobile: pressKey`) |
| `args` | array | Нет | Аргументы для скрипта |

#### Примеры для браузера

```javascript
// Get page title
execute_script({ script: "return document.title" })

// Get scroll position
execute_script({ script: "return window.scrollY" })

// Click element by selector
execute_script({ script: "arguments[0].click()", args: ["#myButton"] })
```

#### Примеры для мобильных (Appium)

```javascript
// Press back key (Android)
execute_script({ script: "mobile: pressKey", args: [{ keycode: 4 }] })

// Activate app
execute_script({ script: "mobile: activateApp", args: [{ appId: "com.example" }] })

// Terminate app
execute_script({ script: "mobile: terminateApp", args: [{ appId: "com.example" }] })

// Deep link
execute_script({ script: "mobile: deepLink", args: [{ url: "myapp://screen", package: "com.example" }] })

// Shell command (Android)
execute_script({ script: "mobile: shell", args: [{ command: "dumpsys", args: ["battery"] }] })
```

#### Часто используемые коды клавиш Android

| Клавиша | Код |
|-----|------|
| BACK | 4 |
| HOME | 3 |
| ENTER | 66 |
| MENU | 82 |
| SEARCH | 84 |

#### Дополнительные мобильные команды

Для полного списка доступных мобильных команд Appium, смотрите:
- [XCUITest Mobile Commands](https://appium.github.io/appium-xcuitest-driver/latest/reference/execute-methods/) (iOS)
- [UiAutomator2 Mobile Commands](https://github.com/appium/appium-uiautomator2-driver#mobile-commands) (Android)

#### Поддержка

- Настольные браузеры
- Мобильные приложения (через мобильные команды Appium)
-----------|------|-----------|---------|-------------|
| `headless` | boolean | خیر | `false` | اجرای کروم در حالت بدون سر |
| `windowWidth` | number | خیر | `1920` | عرض پنجره مرورگر (400-3840) |
| `windowHeight` | number | خیر | `1080` | ارتفاع پنجره مرورگر (400-2160) |
| `navigationUrl` | string | خیر | - | آدرس URL برای هدایت پس از شروع مرورگر |

#### مثال

```
Start a browser with 1920x1080 resolution and navigate to webdriver.io
```

#### پشتیبانی

- مرورگرهای دسکتاپ

---

### `start_app_session`

یک نشست برنامه موبایل را روی iOS یا Android از طریق Appium راه‌اندازی می‌کند.

#### پارامترها

| پارامتر | نوع | اجباری | پیش‌فرض | توضیحات |
|-----------|------|-----------|---------|-------------|
| `platform` | string | بله | - | پلتفرم برای خودکارسازی: `iOS` یا `Android` |
| `deviceName` | string | بله | - | نام دستگاه یا شبیه‌ساز/امولاتور |
| `appPath` | string | خیر* | - | مسیر به فایل برنامه (.app، .ipa، یا .apk) |
| `platformVersion` | string | خیر | - | نسخه سیستم‌عامل (مثال: `17.0`، `14`) |
| `automationName` | string | خیر | Auto | `XCUITest` (iOS)، `UiAutomator2` یا `Espresso` (Android) |
| `udid` | string | خیر | - | شناسه منحصر به فرد دستگاه (برای دستگاه‌های واقعی iOS لازم است) |
| `noReset` | boolean | خیر | `false` | حفظ وضعیت برنامه بین نشست‌ها |
| `fullReset` | boolean | خیر | `true` | حذف و نصب مجدد برنامه قبل از نشست |
| `autoGrantPermissions` | boolean | خیر | `true` | اعطای خودکار مجوزهای برنامه |
| `autoAcceptAlerts` | boolean | خیر | `true` | پذیرش خودکار هشدارهای سیستم |
| `autoDismissAlerts` | boolean | خیر | `false` | رد کردن (به جای پذیرش) هشدارها |
| `appWaitActivity` | string | خیر | - | فعالیتی که باید هنگام راه‌اندازی منتظر آن بماند (فقط Android) |
| `newCommandTimeout` | number | خیر | `60` | ثانیه‌های قبل از تایم‌اوت نشست به دلیل عدم فعالیت |
| `appiumHost` | string | خیر | `127.0.0.1` | نام میزبان سرور Appium |
| `appiumPort` | number | خیر | `4723` | پورت سرور Appium |
| `appiumPath` | string | خیر | `/` | مسیر سرور Appium |

*یا `appPath` باید ارائه شود، یا `noReset: true` برای اتصال به یک برنامه در حال اجرا.

#### مثال

```
Start an iOS app session on iPhone 15 simulator with my app at /path/to/app.app
```

#### پشتیبانی

- شبیه‌سازهای iOS
- دستگاه‌های واقعی iOS
- امولاتورهای Android
- دستگاه‌های واقعی Android

---

### `close_session`

نشست فعلی مرورگر یا برنامه را می‌بندد.

#### پارامترها

| پارامتر | نوع | اجباری | پیش‌فرض | توضیحات |
|-----------|------|-----------|---------|-------------|
| `detach` | boolean | خیر | `false` | جدا شدن از نشست به جای بستن (مرورگر/برنامه همچنان اجرا می‌شود) |

#### نکات

نشست‌هایی با `noReset: true` یا بدون `appPath` به طور خودکار در هنگام بستن جدا می‌شوند تا وضعیت حفظ شود.

#### پشتیبانی

- مرورگرهای دسکتاپ
- برنامه‌های موبایل

---

## ناوبری

### `navigate`

به یک URL هدایت می‌کند.

#### پارامترها

| پارامتر | نوع | اجباری | توضیحات |
|-----------|------|-----------|-------------|
| `url` | string | بله | آدرس URL برای هدایت |

#### مثال

```
Navigate to https://webdriver.io
```

#### پشتیبانی

- مرورگرهای دسکتاپ

---

## تعامل با عناصر

### `click_element`

روی یک عنصر که با یک انتخابگر مشخص شده کلیک می‌کند.

#### پارامترها

| پارامتر | نوع | اجباری | پیش‌فرض | توضیحات |
|-----------|------|-----------|---------|-------------|
| `selector` | string | بله | - | انتخابگر CSS، XPath، یا انتخابگر موبایل |
| `scrollToView` | boolean | خیر | `true` | اسکرول به نمای عنصر قبل از کلیک |
| `timeout` | number | خیر | `3000` | حداکثر زمان انتظار برای عنصر (میلی‌ثانیه) |

#### نکات

- از انتخابگرهای متنی WebdriverIO پشتیبانی می‌کند: `button=Exact text` یا `a*=Contains text`
- از تنظیم مرکزی برای موقعیت اسکرول استفاده می‌کند

#### مثال

```
Click the element with selector "#submit-button"
```

#### پشتیبانی

- مرورگرهای دسکتاپ
- برنامه‌های بومی موبایل

---

### `set_value`

متن را در یک فیلد ورودی تایپ می‌کند.

#### پارامترها

| پارامتر | نوع | اجباری | پیش‌فرض | توضیحات |
|-----------|------|-----------|---------|-------------|
| `selector` | string | بله | - | انتخابگر برای عنصر ورودی |
| `value` | string | بله | - | متن برای تایپ |
| `scrollToView` | boolean | خیر | `true` | اسکرول به نمای عنصر قبل از تایپ |
| `timeout` | number | خیر | `3000` | حداکثر زمان انتظار برای عنصر (میلی‌ثانیه) |

#### نکات

قبل از تایپ متن جدید، مقدار موجود را پاک می‌کند.

#### مثال

```
Set the value "john@example.com" in the element with selector "#email"
```

#### پشتیبانی

- مرورگرهای دسکتاپ
- برنامه‌های بومی موبایل

---

## تحلیل صفحه

### `get_visible_elements`

عناصر قابل مشاهده و قابل تعامل در صفحه یا صفحه نمایش فعلی را دریافت می‌کند. این ابزار اصلی برای کشف عناصری است که برای تعامل در دسترس هستند.

#### پارامترها

| پارامتر | نوع | اجباری | پیش‌فرض | توضیحات |
|-----------|------|-----------|---------|-------------|
| `elementType` | string | خیر | `interactable` | نوع عناصر: `interactable` (دکمه‌ها/پیوندها/ورودی‌ها)، `visual` (تصاویر/SVG‌ها)، یا `all` |
| `inViewportOnly` | boolean | خیر | `true` | فقط عناصر قابل مشاهده در ویوپورت را برگرداند |
| `includeContainers` | boolean | خیر | `false` | شامل کانتینرهای طرح‌بندی (ViewGroup، ScrollView و غیره) |
| `includeBounds` | boolean | خیر | `false` | شامل مختصات عنصر (x، y، عرض، ارتفاع) |
| `limit` | number | خیر | `0` | حداکثر عناصر برای برگرداندن (0 = نامحدود) |
| `offset` | number | خیر | `0` | تعداد عناصر برای رد کردن (برای صفحه‌بندی) |

#### برگشت

```json
{
  "total": 42,
  "showing": 20,
  "hasMore": true,
  "elements": [...]
}
```

**عناصر وب شامل:** tagName، type، id، className، textContent، value، placeholder، href، ariaLabel، role، cssSelector، isInViewport

**عناصر موبایل شامل:** استراتژی‌های مختلف یافتن (شناسه دسترسی، شناسه منبع، XPath، UiAutomator/predicates)، نوع عنصر، متن و اختیاراً مرزها

#### نکات

- **وب**: از یک اسکریپت بهینه‌سازی شده مرورگر برای تشخیص سریع عناصر استفاده می‌کند
- **موبایل**: از تجزیه کارآمد منبع صفحه XML استفاده می‌کند (2 فراخوانی HTTP در مقابل 600+ برای پرس‌وجوهای عنصر)
- از صفحه‌بندی (`limit` و `offset`) برای صفحات بزرگ برای کاهش استفاده از توکن استفاده کنید

#### مثال

```
Get all visible elements on the page with their coordinates
```

#### پشتیبانی

- مرورگرهای دسکتاپ
- برنامه‌های موبایل

---

### `get_accessibility`

درخت دسترسی‌پذیری صفحه فعلی را با اطلاعات معنایی در مورد نقش‌ها، نام‌ها و وضعیت‌ها دریافت می‌کند.

#### پارامترها

| پارامتر | نوع | اجباری | پیش‌فرض | توضیحات |
|-----------|------|-----------|---------|-------------|
| `limit` | number | خیر | `100` | حداکثر گره‌ها برای برگرداندن (0 = نامحدود) |
| `offset` | number | خیر | `0` | تعداد گره‌ها برای رد کردن (برای صفحه‌بندی) |
| `roles` | string[] | خیر | همه | فیلتر به نقش‌های خاص (مثلاً `["button", "link", "textbox"]`) |
| `namedOnly` | boolean | خیر | `true` | فقط گره‌هایی را که دارای نام/برچسب هستند برگردان |

#### برگشت

```json
{
  "total": 85,
  "showing": 100,
  "hasMore": false,
  "nodes": [
    { "role": "button", "name": "Submit" },
    { "role": "link", "name": "Home" }
  ]
}
```

#### نکات

- فقط مرورگر. برای برنامه‌های موبایل، به جای آن از `get_visible_elements` استفاده کنید
- زمانی مفید است که `get_visible_elements` عناصر مورد انتظار را برنمی‌گرداند
- `namedOnly: true` کانتینرهای بی‌نام را فیلتر می‌کند و نویز را کاهش می‌دهد

#### پشتیبانی

- مرورگرهای دسکتاپ

---

## اسکرین‌شات‌ها

### `take_screenshot`

تصویر فعلی از محتوای قابل مشاهده می‌گیرد.

#### پارامترها

| پارامتر | نوع | اجباری | توضیحات |
|-----------|------|-----------|-------------|
| `outputPath` | string | خیر | مسیر ذخیره فایل اسکرین‌شات. اگر حذف شود، داده base64 را برمی‌گرداند |

#### برگشت

داده تصویر رمزگذاری شده با base64 (PNG یا JPEG) با اطلاعات اندازه.

#### نکات

اسکرین‌شات‌ها به طور خودکار بهینه‌سازی می‌شوند:
- حداکثر ابعاد: 2000 پیکسل (اگر بزرگتر باشد، مقیاس کوچک می‌شود)
- حداکثر اندازه فایل: 1 مگابایت
- قالب: PNG با حداکثر فشرده‌سازی، یا JPEG در صورت نیاز برای رعایت محدودیت اندازه

#### پشتیبانی

- مرورگرهای دسکتاپ
- برنامه‌های موبایل

---

## اسکرول کردن

### `scroll`

صفحه را به بالا یا پایین به تعداد مشخصی پیکسل اسکرول می‌کند.

#### پارامترها

| پارامتر | نوع | اجباری | پیش‌فرض | توضیحات |
|-----------|------|-----------|---------|-------------|
| `direction` | string | بله | - | جهت اسکرول: `up` یا `down` |
| `pixels` | number | خیر | `500` | تعداد پیکسل‌ها برای اسکرول |

#### نکات

فقط مرورگر. برای اسکرول موبایل، به جای آن از ابزار `swipe` استفاده کنید.

#### پشتیبانی

- مرورگرهای دسکتاپ

---

## مدیریت کوکی

### `get_cookies`

کوکی‌ها را از نشست فعلی دریافت می‌کند.

#### پارامترها

| پارامتر | نوع | اجباری | توضیحات |
|-----------|------|-----------|-------------|
| `name` | string | خیر | نام کوکی خاص برای بازیابی (برای همه کوکی‌ها حذف کنید) |

#### برگشت

اشیاء کوکی با ویژگی‌های name، value، domain، path، expiry، secure و httpOnly.

#### پشتیبانی

- مرورگرهای دسکتاپ

---

### `set_cookie`

یک کوکی را در نشست فعلی تنظیم می‌کند.

#### پارامترها

| پارامتر | نوع | اجباری | پیش‌فرض | توضیحات |
|-----------|------|-----------|---------|-------------|
| `name` | string | بله | - | نام کوکی |
| `value` | string | بله | - | مقدار کوکی |
| `domain` | string | خیر | فعلی | دامنه کوکی |
| `path` | string | خیر | `/` | مسیر کوکی |
| `expiry` | number | خیر | - | انقضا به عنوان مهر زمانی یونیکس (ثانیه) |
| `secure` | boolean | خیر | - | پرچم امن |
| `httpOnly` | boolean | خیر | - | پرچم HttpOnly |
| `sameSite` | string | خیر | - | ویژگی SameSite: `strict`، `lax` یا `none` |

#### پشتیبانی

- مرورگرهای دسکتاپ

---

### `delete_cookies`

کوکی‌ها را از نشست فعلی حذف می‌کند.

#### پارامترها

| پارامتر | نوع | اجباری | توضیحات |
|-----------|------|-----------|-------------|
| `name` | string | خیر | نام کوکی خاص برای حذف (برای حذف همه حذف کنید) |

#### پشتیبانی

- مرورگرهای دسکتاپ

---

## حرکات لمسی (موبایل)

### `tap_element`

روی یک عنصر یا مختصات صفحه ضربه می‌زند.

#### پارامترها

| پارامتر | نوع | اجباری | توضیحات |
|-----------|------|-----------|-------------|
| `selector` | string | خیر* | انتخابگر برای عنصر برای ضربه زدن |
| `x` | number | خیر* | مختصات X برای ضربه |
| `y` | number | خیر* | مختصات Y برای ضربه |

*یا `selector` یا هر دو `x` و `y` مورد نیاز هستند.

#### پشتیبانی

- برنامه‌های موبایل

---

### `swipe`

یک حرکت کشیدن در جهت مشخص شده انجام می‌دهد.

#### پارامترها

| پارامتر | نوع | اجباری | پیش‌فرض | توضیحات |
|-----------|------|-----------|---------|-------------|
| `direction` | string | بله | - | جهت کشیدن: `up`، `down`، `left`، `right` |
| `duration` | number | خیر | `500` | مدت کشیدن به میلی‌ثانیه (100-5000) |
| `percent` | number | خیر | 0.5/0.95 | درصد صفحه برای کشیدن (0-1) |

#### نکات

- درصد پیش‌فرض: 0.5 برای کشیدن عمودی، 0.95 برای کشیدن افقی
- جهت حرکت محتوا را نشان می‌دهد: "swipe up" محتوا را به بالا اسکرول می‌کند

#### مثال

```
Swipe up to scroll down the screen
```

#### پشتیبانی

- برنامه‌های موبایل

---

### `drag_and_drop`

یک عنصر را به عنصر دیگر یا مختصات می‌کشد.

#### پارامترها

| پارامتر | نوع | اجباری | توضیحات |
|-----------|------|-----------|-------------|
| `sourceSelector` | string | بله | انتخابگر عنصر منبع برای کشیدن |
| `targetSelector` | string | خیر* | انتخابگر عنصر هدف برای رها کردن |
| `x` | number | خیر* | آفست X هدف (اگر targetSelector نباشد) |
| `y` | number | خیر* | آفست Y هدف (اگر targetSelector نباشد) |
| `duration` | number | خیر | پیش‌فرض | مدت کشیدن به میلی‌ثانیه (100-5000) |

*یا `targetSelector` یا هر دو `x` و `y` مورد نیاز هستند.

#### پشتیبانی

- برنامه‌های موبایل

---

## چرخه عمر برنامه (موبایل)

### `get_app_state`

وضعیت فعلی یک برنامه را دریافت می‌کند.

#### پارامترها

| پارامتر | نوع | اجباری | توضیحات |
|-----------|------|-----------|-------------|
| `bundleId` | string | بله | شناسه برنامه (شناسه bundle برای iOS، نام پکیج برای Android) |

#### برگشت

وضعیت برنامه: `not installed`، `not running`، `running in background (suspended)`، `running in background`، یا `running in foreground`.

#### پشتیبانی

- برنامه‌های موبایل

---

## تعویض زمینه (برنامه‌های هیبریدی)

### `get_contexts`

همه زمینه‌های موجود (بومی و وب‌ویوها) را فهرست می‌کند.

#### پارامترها

هیچ

#### برگشت

آرایه‌ای از نام‌های زمینه (به عنوان مثال، `["NATIVE_APP", "WEBVIEW_com.example.app"]`).

#### پشتیبانی

- برنامه‌های هیبریدی موبایل

---

### `get_current_context`

زمینه فعال فعلی را دریافت می‌کند.

#### پارامترها

هیچ

#### برگشت

نام زمینه فعلی (به عنوان مثال، `NATIVE_APP` یا `WEBVIEW_*`).

#### پشتیبانی

- برنامه‌های هیبریدی موبایل

---

### `switch_context`

بین زمینه‌های بومی و وب‌ویو جابجا می‌شود.

#### پارامترها

| پارامتر | نوع | اجباری | توضیحات |
|-----------|------|-----------|-------------|
| `context` | string | بله | نام زمینه یا شاخص (1 مبنا) از `get_contexts` |

#### مثال

```
Switch to the WEBVIEW_com.example.app context
```

#### پشتیبانی

- برنامه‌های هیبریدی موبایل

---

## کنترل دستگاه (موبایل)

### `rotate_device`

دستگاه را به جهت خاصی می‌چرخاند.

#### پارامترها

| پارامتر | نوع | اجباری | توضیحات |
|-----------|------|-----------|-------------|
| `orientation` | string | بله | `PORTRAIT` یا `LANDSCAPE` |

#### پشتیبانی

- برنامه‌های موبایل

---

### `hide_keyboard`

صفحه کلید روی صفحه را پنهان می‌کند.

#### پارامترها

هیچ

#### پشتیبانی

- برنامه‌های موبایل

---

### `get_geolocation`

مختصات GPS فعلی را دریافت می‌کند.

#### پارامترها

هیچ

#### برگشت

شیء با `latitude`، `longitude` و `altitude`.

#### پشتیبانی

- برنامه‌های موبایل

---

### `set_geolocation`

مختصات GPS دستگاه را تنظیم می‌کند.

#### پارامترها

| پارامتر | نوع | اجباری | توضیحات |
|-----------|------|-----------|-------------|
| `latitude` | number | بله | مختصات عرض جغرافیایی (-90 تا 90) |
| `longitude` | number | بله | مختصات طول جغرافیایی (-180 تا 180) |
| `altitude` | number | خیر | ارتفاع به متر |

#### مثال

```
Set geolocation to San Francisco (37.7749, -122.4194)
```

#### پشتیبانی

- برنامه‌های موبایل

---

## اجرای اسکریپت

### `execute_script`

جاوا اسکریپت را در مرورگر یا دستورات موبایل را از طریق Appium اجرا می‌کند.

#### پارامترها

| پارامتر | نوع | اجباری | توضیحات |
|-----------|------|-----------|-------------|
| `script` | string | بله | کد جاوا اسکریپت (مرورگر) یا دستور موبایل (مثلاً `mobile: pressKey`) |
| `args` | array | خیر | آرگومان‌ها برای اسکریپت |

#### مثال‌های مرورگر

```javascript
// Get page title
execute_script({ script: "return document.title" })

// Get scroll position
execute_script({ script: "return window.scrollY" })

// Click element by selector
execute_script({ script: "arguments[0].click()", args: ["#myButton"] })
```

#### مثال‌های موبایل (Appium)

```javascript
// Press back key (Android)
execute_script({ script: "mobile: pressKey", args: [{ keycode: 4 }] })

// Activate app
execute_script({ script: "mobile: activateApp", args: [{ appId: "com.example" }] })

// Terminate app
execute_script({ script: "mobile: terminateApp", args: [{ appId: "com.example" }] })

// Deep link
execute_script({ script: "mobile: deepLink", args: [{ url: "myapp://screen", package: "com.example" }] })

// Shell command (Android)
execute_script({ script: "mobile: shell", args: [{ command: "dumpsys", args: ["battery"] }] })
```

#### کدهای کلید رایج Android

| کلید | کد |
|-----|------|
| BACK | 4 |
| HOME | 3 |
| ENTER | 66 |
| MENU | 82 |
| SEARCH | 84 |

#### دستورات موبایل بیشتر

برای لیست کامل دستورات موبایل Appium موجود، به موارد زیر مراجعه کنید:
- [XCUITest Mobile Commands](https://appium.github.io/appium-xcuitest-driver/latest/reference/execute-methods/) (iOS)
- [UiAutomator2 Mobile Commands](https://github.com/appium/appium-uiautomator2-driver#mobile-commands) (Android)

#### پشتیبانی

- مرورگرهای دسکتاپ
- برنامه‌های موبایل (از طریق دستورات موبایل Appium)